<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gesti√≥n de Mantenimiento Hospitalario</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <style>
        :root {
            --primary: #0d47a1;
            --secondary: #1565c0;
            --accent: #ff6f00;
            --success: #2e7d32;
            --warning: #f57f17;
            --danger: #c62828;
            --neutral-dark: #263238;
            --neutral-light: #eceff1;
            --border: #90a4ae;
            --shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: var(--neutral-dark);
        }

        .container-app {
            display: flex;
            height: 100vh;
            background: var(--neutral-light);
        }

        /* SIDEBAR */
        .sidebar {
            width: 260px;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 25px 0;
            box-shadow: var(--shadow-lg);
            overflow-y: auto;
            position: fixed;
            height: 100vh;
            left: 0;
        }

        .sidebar-header {
            padding: 0 20px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            margin-bottom: 20px;
        }

        .logo-icon {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .hospital-name {
            font-size: 14px;
            font-weight: 600;
            opacity: 0.95;
            letter-spacing: 0.5px;
        }

        .nav-section {
            padding: 20px 0;
        }

        .nav-title {
            font-size: 11px;
            font-weight: 700;
            text-transform: uppercase;
            opacity: 0.7;
            padding: 0 20px;
            margin-bottom: 12px;
            letter-spacing: 1px;
        }

        .nav-item {
            padding: 12px 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.15);
            padding-left: 24px;
        }

        .nav-item.active {
            background: rgba(255, 255, 255, 0.25);
            border-left: 4px solid var(--accent);
            padding-left: 16px;
            font-weight: 600;
        }

        .nav-item-icon {
            font-size: 18px;
            min-width: 20px;
        }

        /* MAIN CONTENT */
        .main-content {
            flex: 1;
            margin-left: 260px;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background: var(--neutral-light);
        }

        .header {
            background: white;
            padding: 20px 30px;
            box-shadow: var(--shadow);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #e0e0e0;
        }

        .header-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .header-actions {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .btn-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            background: var(--neutral-light);
            cursor: pointer;
            font-size: 18px;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-icon:hover {
            background: var(--primary);
            color: white;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 15px;
            background: var(--neutral-light);
            border-radius: 20px;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .content {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
        }

        /* MODULES */
        .module {
            display: none;
        }

        .module.active {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* DASHBOARD */
        .kpi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .kpi-card {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            border-left: 5px solid var(--primary);
            transition: all 0.3s ease;
        }

        .kpi-card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-5px);
        }

        .kpi-card.success {
            border-left-color: var(--success);
        }

        .kpi-card.warning {
            border-left-color: var(--warning);
        }

        .kpi-card.danger {
            border-left-color: var(--danger);
        }

        .kpi-label {
            font-size: 12px;
            color: var(--border);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 8px;
            letter-spacing: 0.5px;
        }

        .kpi-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .kpi-change {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            display: inline-block;
            background: rgba(46, 125, 50, 0.1);
            color: var(--success);
        }

        .kpi-change.negative {
            background: rgba(198, 40, 40, 0.1);
            color: var(--danger);
        }

        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 8px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }

        .chart-container h3 {
            margin-bottom: 20px;
            color: var(--primary);
            font-size: 16px;
        }

        /* TABLA */
        .table-container {
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            overflow: hidden;
        }

        .table-header {
            padding: 20px;
            background: #f5f7fa;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-actions {
            display: flex;
            gap: 10px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th {
            background: #f5f7fa;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: var(--primary);
            border-bottom: 2px solid #e0e0e0;
            font-size: 12px;
            text-transform: uppercase;
        }

        td {
            padding: 15px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 14px;
        }

        tr:hover {
            background: #fafbfc;
        }

        .status-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .status-active {
            background: rgba(46, 125, 50, 0.1);
            color: var(--success);
        }

        .status-pending {
            background: rgba(245, 127, 23, 0.1);
            color: var(--warning);
        }

        .status-inactive {
            background: rgba(198, 40, 40, 0.1);
            color: var(--danger);
        }

        /* BOTONES */
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: #0a3d91;
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background: var(--neutral-light);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-small {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 8px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: var(--shadow-lg);
        }

        .modal-header {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 20px;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--border);
        }

        /* FORMULARIOS */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            color: var(--neutral-dark);
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #d0d0d0;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(13, 71, 161, 0.1);
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            margin-top: 25px;
        }

        /* ALERTAS */
        .alert {
            padding: 15px 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 14px;
        }

        .alert-success {
            background: rgba(46, 125, 50, 0.1);
            border-left: 4px solid var(--success);
            color: var(--success);
        }

        .alert-warning {
            background: rgba(245, 127, 23, 0.1);
            border-left: 4px solid var(--warning);
            color: var(--warning);
        }

        .alert-danger {
            background: rgba(198, 40, 40, 0.1);
            border-left: 4px solid var(--danger);
            color: var(--danger);
        }

        /* RESPONSIVE */
        @media (max-width: 1024px) {
            .sidebar {
                width: 80px;
            }

            .sidebar-header {
                display: none;
            }

            .nav-title {
                display: none;
            }

            .nav-item span {
                display: none;
            }

            .main-content {
                margin-left: 80px;
            }

            .kpi-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .sidebar {
                position: fixed;
                left: 0;
                width: 60px;
                z-index: 100;
            }

            .main-content {
                margin-left: 60px;
            }

            .kpi-grid {
                grid-template-columns: 1fr;
            }

            .header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }

            .header-title {
                font-size: 18px;
            }

            .content {
                padding: 15px;
            }
        }

        .text-muted {
            color: var(--border);
            font-size: 12px;
        }

        .mt-3 {
            margin-top: 20px;
        }

        .mb-3 {
            margin-bottom: 20px;
        }

        .hidden {
            display: none;
        }

        /* INVENTARIO */
        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 14px;
        }
        @media (max-width: 900px) {
            .form-grid { grid-template-columns: 1fr; }
        }
        details.section {
            background: white;
            border-radius: 10px;
            box-shadow: var(--shadow);
            margin-bottom: 14px;
            overflow: hidden;
            border: 1px solid rgba(144,164,174,0.35);
        }
        details.section > summary {
            cursor: pointer;
            padding: 14px 16px;
            font-weight: 700;
            color: var(--primary);
            list-style: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 10px;
        }
        details.section > summary::-webkit-details-marker { display: none; }
        details.section[open] > summary {
            border-bottom: 1px solid rgba(144,164,174,0.35);
            background: rgba(13,71,161,0.04);
        }
        .summary-hint {
            font-size: 12px;
            font-weight: 600;
            color: var(--border);
        }
        .section-body { padding: 16px; }
        .badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 12px;
            font-weight: 700;
            background: rgba(13,71,161,0.08);
            color: var(--primary);
        }
        .btn-row { display: flex; gap: 10px; flex-wrap: wrap; }
        .table-actions .btn { white-space: nowrap; }
    </style>
</head>
<body>
    <div class="container-app">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-icon">üè•</div>
                <div class="hospital-name">Hospital Management</div>
            </div>

            <div class="nav-section">
                <div class="nav-title">Principal</div>
                <div class="nav-item active" onclick="switchModule('dashboard')">
                    <span class="nav-item-icon">üìä</span>
                    <span>Dashboard</span>
                </div>
            
                <div class="nav-item" onclick="switchModule('inventario')">
                    <span class="nav-item-icon">üì¶</span>
                    <span>Inventario Maestro</span>
                </div>
</div>

            <div class="nav-section">
                <div class="nav-title">Operaciones</div>
                <div class="nav-item" onclick="switchModule('equipos')">
                    <span class="nav-item-icon">üîß</span>
                    <span>Equipos</span>
                </div>
                <div class="nav-item" onclick="switchModule('inventario')">
                    <span class="nav-item-icon">üóÉÔ∏è</span>
                    <span>Inventario</span>
                </div>
                <div class="nav-item" onclick="switchModule('mantenimientos')">
                    <span class="nav-item-icon">üìã</span>
                    <span>Mantenimientos</span>
                </div>
                <div class="nav-item" onclick="switchModule('planificacion')">
                    <span class="nav-item-icon">üìÖ</span>
                    <span>Planificaci√≥n</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-title">Recursos</div>
                <div class="nav-item" onclick="switchModule('repuestos')">
                    <span class="nav-item-icon">üì¶</span>
                    <span>Repuestos</span>
                </div>
                <div class="nav-item" onclick="switchModule('documentos')">
                    <span class="nav-item-icon">üìÑ</span>
                    <span>Documentos</span>
                </div>
            </div>

            <div class="nav-section">
                <div class="nav-title">An√°lisis</div>
                <div class="nav-item" onclick="switchModule('kpis')">
                    <span class="nav-item-icon">üìà</span>
                    <span>KPIs</span>
                </div>
                <div class="nav-item" onclick="switchModule('reportes')">
                    <span class="nav-item-icon">üìë</span>
                    <span>Reportes</span>
                </div>
                <div class="nav-item" onclick="switchModule('auditoria')">
                    <span class="nav-item-icon">üîç</span>
                    <span>Auditor√≠a</span>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <div class="main-content">
            <!-- HEADER -->
            <div class="header">
                <div class="header-title" id="moduleTitle">Dashboard Ejecutivo</div>
                <div class="header-actions">
                    <button class="btn-icon" title="Notificaciones">üîî</button>
                    <button class="btn-icon" onclick="printModule()" title="Imprimir">üñ®Ô∏è</button>
                    <button class="btn-icon" onclick="exportData()" title="Exportar">üíæ</button>
                    <div class="user-profile">
                        <div class="avatar">JP</div>
                        <span style="font-size: 12px; color: var(--neutral-dark);">Dr. Jean Paul</span>
                    </div>
                </div>
            </div>

            <!-- CONTENT -->
            <div class="content">
                <!-- DASHBOARD MODULE -->
                <div id="dashboard" class="module active">
                    <div class="alert alert-success" id="dashboardAlert" style="display: none;">
                        ‚úì Sistema sincronizado - √öltimas actualizaciones cargadas
                    </div>

                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-label">Equipos Activos</div>
                            <div class="kpi-value" id="kpiEquipos">1,182</div>
                            <div class="kpi-change">+5.3% vs √∫ltimo mes</div>
                            <div class="text-muted mt-3">Operativos en 28 √°reas</div>
                        </div>

                        <div class="kpi-card success">
                            <div class="kpi-label">Cumplimiento Plan</div>
                            <div class="kpi-value" id="kpiCumplimiento">94.2%</div>
                            <div class="kpi-change">+2.1% vs trimestre anterior</div>
                            <div class="text-muted mt-3">Mantenimientos ejecutados</div>
                        </div>

                        <div class="kpi-card warning">
                            <div class="kpi-label">Mantenimientos Pendientes</div>
                            <div class="kpi-value" id="kpiPendientes">23</div>
                            <div class="kpi-change negative">‚ö†Ô∏è Requieren atenci√≥n</div>
                            <div class="text-muted mt-3">Pr√≥ximos 7 d√≠as</div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-label">MTBF Promedio</div>
                            <div class="kpi-value" id="kpiMTBF">2,847h</div>
                            <div class="kpi-change">+324h respecto a a√±o anterior</div>
                            <div class="text-muted mt-3">Horas entre fallos</div>
                        </div>

                        <div class="kpi-card">
                            <div class="kpi-label">MTTR Promedio</div>
                            <div class="kpi-value" id="kpiMTTR">4.2h</div>
                            <div class="kpi-change">-0.8h mejora</div>
                            <div class="text-muted mt-3">Horas promedio reparaci√≥n</div>
                        </div>

                        <div class="kpi-card danger">
                            <div class="kpi-label">Costo Mantenimiento</div>
                            <div class="kpi-value" id="kpiCosto">$847K</div>
                            <div class="kpi-change negative">+12% vs presupuesto</div>
                            <div class="text-muted mt-3">Per√≠odo enero-diciembre</div>
                        </div>
                    </div>

                    <div class="chart-container">
                        <h3>Tendencia MTBF/MTTR (√öltimos 12 meses)</h3>
                        <canvas id="mtbfChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>Cumplimiento Plan de Mantenimiento por √Årea</h3>
                        <canvas id="complianceChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>Distribuci√≥n de Tipos de Mantenimiento</h3>
                        <canvas id="maintenanceTypeChart"></canvas>
                    </div>
                </div>

                <!-- EQUIPOS MODULE -->
                
                <div id="inventario" class="module">
                    <div class="table-container">
                        <div class="table-header">
                            <h3>Inventario Maestro</h3>
                            <div class="table-actions">
                                <button class="btn btn-primary" onclick="openModal('newInventario')">+ Nuevo Registro</button>
                                <button class="btn btn-secondary" onclick="loadInventario()">‚ü≥ Actualizar</button>
                                <button class="btn btn-secondary" onclick="exportInventarioCSV()">‚¨á Exportar CSV</button>
                            </div>
                        </div>

                        <div style="display:flex; gap:12px; align-items:center; margin: 10px 0 16px;">
                            <input id="inventarioSearch" type="text" placeholder="Buscar por item, equipo, serie, placa, servicio..." 
                                   style="flex:1; padding:10px 12px; border:1px solid #e0e0e0; border-radius:10px;"
                                   oninput="debouncedInventarioSearch()"/>
                            <div id="inventarioCount" style="font-weight:600; color:#0d47a1;">0 registros</div>
                        </div>

                        <table>
                            <thead>
                                <tr>
                                    <th>Item</th>
                                    <th>Equipo</th>
                                    <th>Marca</th>
                                    <th>Modelo</th>
                                    <th>Serie</th>
                                    <th>Placa</th>
                                    <th>Servicio</th>
                                    <th>Ubicaci√≥n</th>
                                    <th>Vida √∫til</th>
                                    <th>Pr√≥x. mtto</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="inventarioTableBody">
                                <tr><td colspan="11" style="text-align:center; padding:18px; color:#607d8b;">Cargando inventario...</td></tr>
                            </tbody>
                        </table>

                        <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:12px;">
                            <button class="btn btn-secondary" onclick="inventarioPrevPage()">‚óÄ Anterior</button>
                            <button class="btn btn-secondary" onclick="inventarioNextPage()">Siguiente ‚ñ∂</button>
                        </div>
                    </div>
                </div>
<div id="equipos" class="module">
                    <div class="mb-3">
                        <div class="btn-row">
                            <button class="btn btn-primary" onclick="openModal('newEquipo')">+ Nuevo Equipo</button>
                            <button class="btn btn-secondary" onclick="switchModule('inventario')">üóÉÔ∏è Ir a Inventario</button>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <input type="text" placeholder="Buscar equipo..." style="width: 300px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <div class="table-actions">
                                <button class="btn btn-small btn-secondary">Filtrar</button>
                                <button class="btn btn-small btn-secondary">Exportar</button>
                            </div>
                        </div>

                        <table>
                            <thead>
                                <tr>
                                    <th>C√≥digo/Serial</th>
                                    <th>Nombre</th>
                                    <th>√Årea</th>
                                    <th>Tipo</th>
                                    <th>Estado</th>
                                    <th>Pr√≥x. Mantenimiento</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#EQ-2024-001</td>
                                    <td>Resonancia Magn√©tica 3T</td>
                                    <td>Imagenolog√≠a</td>
                                    <td>Imagenolog√≠a</td>
                                    <td><span class="status-badge status-active">Activo</span></td>
                                    <td>2025-02-15</td>
                                    <td>
                                        <button class="btn btn-small btn-secondary">Ver</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#EQ-2024-002</td>
                                    <td>Ventilador Mec√°nico V500</td>
                                    <td>UCI</td>
                                    <td>Monitoreo</td>
                                    <td><span class="status-badge status-active">Activo</span></td>
                                    <td>2025-01-20</td>
                                    <td>
                                        <button class="btn btn-small btn-secondary">Ver</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>#EQ-2024-003</td>
                                    <td>Analizador Bioqu√≠mico</td>
                                    <td>Laboratorio</td>
                                    <td>Laboratorio</td>
                                    <td><span class="status-badge status-pending">Mantenimiento</span></td>
                                    <td>2025-03-10</td>
                                    <td>
                                        <button class="btn btn-small btn-secondary">Ver</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>


                <!-- INVENTARIO MODULE -->
                <div id="inventario" class="module">
                    <div class="mb-3" style="display:flex; justify-content: space-between; align-items: center; gap: 12px; flex-wrap: wrap;">
                        <div class="btn-row">
                            <button class="btn btn-primary" onclick="openModal('newInventario')">+ Nuevo Registro</button>
                            <button class="btn btn-secondary" onclick="loadInventario(true)">üîÑ Actualizar</button>
                            <span class="badge" id="inventarioCount">0 registros</span>
                        </div>
                        <div class="btn-row">
                            <input id="inventarioSearch" type="text" placeholder="Buscar por ITEM, equipo, serie, placa, servicio..." style="width: 360px; max-width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
                            <button class="btn btn-small btn-secondary" onclick="exportInventarioCSV()">üíæ Exportar CSV</button>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <div class="text-muted">M√≥dulo de inventario maestro (vida √∫til, adquisici√≥n, garant√≠a, calibraci√≥n y mantenimiento).</div>
                            <div class="table-actions">
                                <button class="btn btn-small btn-secondary" onclick="toggleInventarioColumns()">Columnas</button>
                            </div>
                        </div>

                        <table>
                            <thead>
                                <tr>
                                    <th data-col="ITEM">ITEM</th>
                                    <th data-col="EQUIPO">EQUIPO</th>
                                    <th data-col="MARCA">MARCA</th>
                                    <th data-col="MODELO">MODELO</th>
                                    <th data-col="SERIE">SERIE</th>
                                    <th data-col="PLACA">PLACA</th>
                                    <th data-col="SERVICIO">SERVICIO</th>
                                    <th data-col="UBICACI√ìN">UBICACI√ìN</th>
                                    <th data-col="VIDA UTIL">VIDA √öTIL</th>
                                    <th data-col="PROX_MTTO">PR√ìX. MTTO</th>
                                    <th>Acciones</th>
                                </tr>
                            </thead>
                            <tbody id="inventarioTbody">
                                <tr>
                                    <td colspan="11" class="text-muted" style="padding: 18px; text-align:center;">
                                        Cargando inventario...
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <div class="text-muted mt-3" id="inventarioPaging" style="display:flex; justify-content: space-between; align-items:center; gap: 10px; flex-wrap: wrap;">
                            <span>Tip: usa b√∫squeda para filtrar r√°pidamente.</span>
                            <div class="btn-row">
                                <button class="btn btn-small btn-secondary" id="inventarioPrevBtn" onclick="inventarioPrevPage()" disabled>‚óÄ Anterior</button>
                                <button class="btn btn-small btn-secondary" id="inventarioNextBtn" onclick="inventarioNextPage()" disabled>Siguiente ‚ñ∂</button>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- MANTENIMIENTOS MODULE -->
                <div id="mantenimientos" class="module">
                    <div class="mb-3">
                        <button class="btn btn-primary" onclick="openModal('newMantenimiento')">+ Registrar Intervenci√≥n</button>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <input type="text" placeholder="Buscar intervenci√≥n..." style="width: 300px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>

                        <table>
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Equipo</th>
                                    <th>Tipo</th>
                                    <th>Fecha Ejecuci√≥n</th>
                                    <th>T√©cnico</th>
                                    <th>Duraci√≥n</th>
                                    <th>Costo</th>
                                    <th>Estado</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#INT-2025-001</td>
                                    <td>Resonancia Magn√©tica 3T</td>
                                    <td>Preventivo</td>
                                    <td>2025-01-05</td>
                                    <td>Carlos L√≥pez</td>
                                    <td>2.5h</td>
                                    <td>$450</td>
                                    <td><span class="status-badge status-active">Completado</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- PLANIFICACI√ìN MODULE -->
                <div id="planificacion" class="module">
                    <div class="mb-3">
                        <button class="btn btn-primary" onclick="openModal('newPlan')">+ Crear Plan Preventivo</button>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 8px; text-align: center; color: var(--border);">
                        Calendario de mantenimientos programados
                    </div>
                </div>

                <!-- REPUESTOS MODULE -->
                <div id="repuestos" class="module">
                    <div class="table-container">
                        <div class="table-header">
                            <input type="text" placeholder="Buscar repuesto..." style="width: 300px; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">
                            <div class="table-actions">
                                <button class="btn btn-small btn-primary">+ Nuevo Movimiento</button>
                            </div>
                        </div>

                        <table>
                            <thead>
                                <tr>
                                    <th>C√≥digo</th>
                                    <th>Nombre</th>
                                    <th>Stock Actual</th>
                                    <th>Stock M√≠n./M√°x.</th>
                                    <th>Costo Unitario</th>
                                    <th>Estado Stock</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>#REP-001</td>
                                    <td>Tubo rayos X 150kVp</td>
                                    <td>2</td>
                                    <td>1/4</td>
                                    <td>$12,500</td>
                                    <td><span class="status-badge status-warning">Bajo</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- DOCUMENTOS MODULE -->
                <div id="documentos" class="module">
                    <div class="mb-3">
                        <button class="btn btn-primary">+ Subir Documento</button>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 8px; color: var(--border); text-align: center;">
                        Repositorio centralizado de procedimientos, protocolos y manuales
                    </div>
                </div>

                <!-- KPIS MODULE -->
                <div id="kpis" class="module">
                    <div class="chart-container">
                        <h3>Indicadores Clave de Desempe√±o - Per√≠odo 2024</h3>
                        <canvas id="kpiDetailChart"></canvas>
                    </div>
                </div>

                <!-- REPORTES MODULE -->
                <div id="reportes" class="module">
                    <div class="mb-3">
                        <button class="btn btn-primary">üìë Generar Reporte Desempe√±o</button>
                        <button class="btn btn-secondary">üìã Reporte Cumplimiento</button>
                        <button class="btn btn-secondary">üí∞ Reporte Costos</button>
                        <button class="btn btn-secondary">üîç Reporte Auditor√≠a</button>
                    </div>
                    <div style="background: white; padding: 20px; border-radius: 8px; color: var(--border); text-align: center;">
                        Selecciona un tipo de reporte para generar
                    </div>
                </div>

                <!-- AUDITOR√çA MODULE -->
                <div id="auditoria" class="module">
                    <div class="table-container">
                        <table>
                            <thead>
                                <tr>
                                    <th>Fecha</th>
                                    <th>Usuario</th>
                                    <th>Acci√≥n</th>
                                    <th>Registro Afectado</th>
                                    <th>Cambios</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2025-01-07 14:30</td>
                                    <td>Dr. Jean Paul</td>
                                    <td>Crear Intervenci√≥n</td>
                                    <td>#INT-2025-001</td>
                                    <td>Intervenci√≥n registrada</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALS -->
    <div id="newEquipo" class="modal">
        <div class="modal-content">
            <button class="modal-close" onclick="closeModal('newEquipo')">‚úï</button>
            <div class="modal-header">Registrar Nuevo Equipo</div>
            <form>
                <div class="form-group">
                    <label>Nombre del Equipo</label>
                    <input type="text" placeholder="Ej: Resonancia Magn√©tica 3T">
                </div>
                <div class="form-group">
                    <label>C√≥digo/Serial</label>
                    <input type="text" placeholder="Ej: EQ-2025-001">
                </div>
                <div class="form-group">
                    <label>Tipo</label>
                    <select>
                        <option>Imagenolog√≠a</option>
                        <option>Laboratorio</option>
                        <option>Monitoreo</option>
                    </select>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('newEquipo')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar</button>
                </div>
            </form>
        </div>
    </div>


    <div id="newInventario" class="modal">
        <div class="modal-content" style="max-width: 980px;">
            <button class="modal-close" onclick="closeModal('newInventario')">‚úï</button>
            <div class="modal-header">Registro de Inventario</div>

            <form id="inventarioForm">
                <details class="section" open>
                    <summary>1) Identificaci√≥n del equipo <span class="summary-hint">ITEM, serie, placa, INVIMA</span></summary>
                    <div class="section-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>ITEM</label>
                                <input name="ITEM" type="text" placeholder="Ej: 00123" required>
                            </div>
                            <div class="form-group">
                                <label>EQUIPO</label>
                                <input name="EQUIPO" type="text" placeholder="Ej: Monitor de signos vitales" required>
                            </div>
                            <div class="form-group">
                                <label>MARCA</label>
                                <input name="MARCA" type="text" placeholder="Ej: Nihon Kohden">
                            </div>
                            <div class="form-group">
                                <label>MODELO</label>
                                <input name="MODELO" type="text" placeholder="Ej: BSM-3000">
                            </div>
                            <div class="form-group">
                                <label>FECHA FABRICA</label>
                                <input name="FECHA FABRICA" type="date">
                            </div>
                            <div class="form-group">
                                <label>SERIE</label>
                                <input name="SERIE" type="text" placeholder="Ej: SN123456">
                            </div>
                            <div class="form-group">
                                <label>CERTIFICADO 2025</label>
                                <input name="CERTIFICADO 2025" type="text" placeholder="Ej: S√≠ / No / C√≥digo">
                            </div>
                            <div class="form-group">
                                <label>PLACA</label>
                                <input name="PLACA" type="text" placeholder="Ej: HSLV-PL-0098">
                            </div>
                            <div class="form-group">
                                <label>CODIGO ECRI</label>
                                <input name="CODIGO ECRI" type="text" placeholder="Ej: ECRI-XXXX">
                            </div>
                            <div class="form-group">
                                <label>REGISTRO INVIMA</label>
                                <input name="REGISTRO INVIMA" type="text" placeholder="Ej: 2019DM-0012345">
                            </div>
                        </div>
                    </div>
                </details>

                <details class="section">
                    <summary>2) Ubicaci√≥n y clasificaci√≥n <span class="summary-hint">servicio, riesgo, vida √∫til</span></summary>
                    <div class="section-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>SERVICIO</label>
                                <input name="SERVICIO" type="text" placeholder="Ej: UCI Adultos">
                            </div>
                            <div class="form-group">
                                <label>UBICACI√ìN</label>
                                <input name="UBICACI√ìN" type="text" placeholder="Ej: Torre A - Piso 2 - Cub√≠culo 4">
                            </div>
                            <div class="form-group">
                                <label>CLASIFICACION BIOMEDICA</label>
                                <input name="CLASIFICACION BIOMEDICA" type="text" placeholder="Ej: Diagn√≥stico / Terap√©utico / Soporte">
                            </div>
                            <div class="form-group">
                                <label>CLASIFICACION DE LA TECNOLOGIA</label>
                                <input name="CLASIFICACION DE LA TECNOLOGIA" type="text" placeholder="Ej: Equipo biom√©dico / Dispositivo m√©dico">
                            </div>
                            <div class="form-group">
                                <label>CLASIFICACION DEL RIESGO</label>
                                <input name="CLASIFICACION DEL RIESGO" type="text" placeholder="Ej: I / IIa / IIb / III">
                            </div>
                            <div class="form-group">
                                <label>VIDA UTIL</label>
                                <input name="VIDA UTIL" type="text" placeholder="Ej: 10 a√±os">
                            </div>
                        </div>
                    </div>
                </details>

                <details class="section">
                    <summary>3) Adquisici√≥n, compra y garant√≠a <span class="summary-hint">contrato, valor, fechas</span></summary>
                    <div class="section-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>TIPO DE ADQUISICION</label>
                                <input name="TIPO DE ADQUISICION" type="text" placeholder="Ej: Compra / Donaci√≥n / Comodato">
                            </div>
                            <div class="form-group">
                                <label>NO. DE CONTRATO</label>
                                <input name="NO. DE CONTRATO" type="text" placeholder="Ej: 123-2025">
                            </div>
                            <div class="form-group">
                                <label>FECHA DE COMRPA</label>
                                <input name="FECHA DE COMRPA" type="date">
                            </div>
                            <div class="form-group">
                                <label>VALOR EN PESOS</label>
                                <input name="VALOR EN PESOS" type="number" step="1" placeholder="Ej: 15000000">
                            </div>
                            <div class="form-group">
                                <label>FECHA DE RECEPCI√ìN</label>
                                <input name="FECHA DE RECEPCI√ìN" type="date">
                            </div>
                            <div class="form-group">
                                <label>FECHA DE INSTALACI√ìN</label>
                                <input name="FECHA DE INSTALACI√ìN" type="date">
                            </div>
                            <div class="form-group">
                                <label>INICIO DE GARANTIA</label>
                                <input name="INICIO DE GARANTIA" type="date">
                            </div>
                            <div class="form-group">
                                <label>TERMINO DE GARANTIA</label>
                                <input name="TERMINO DE GARANTIA" type="date">
                            </div>
                        </div>
                    </div>
                </details>

                <details class="section">
                    <summary>4) Mantenimiento, calibraci√≥n y programaci√≥n <span class="summary-hint">frecuencia, costos, anual</span></summary>
                    <div class="section-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>TIPO DE MTTO</label>
                                <input name="TIPO DE MTTO" type="text" placeholder="Ej: Preventivo / Correctivo / Calibraci√≥n">
                            </div>
                            <div class="form-group">
                                <label>COSTO DE MANTENIMIENTO</label>
                                <input name="COSTO DE MANTENIMIENTO" type="number" step="1" placeholder="Ej: 450000">
                            </div>
                            <div class="form-group">
                                <label>CALIBRABLE</label>
                                <select name="CALIBRABLE">
                                    <option value="">(Seleccionar)</option>
                                    <option>SI</option>
                                    <option>NO</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>N. CERTIFICADO</label>
                                <input name="N. CERTIFICADO" type="text" placeholder="Ej: CAL-2025-009">
                            </div>
                            <div class="form-group">
                                <label>FRECUENCIA DE MTTO PREVENTIVO</label>
                                <select name="FRECUENCIA DE MTTO PREVENTIVO" id="invFreqSelect">
                                    <option value="">(Seleccionar)</option>
                                    <option value="Mensual">Mensual</option>
                                    <option value="Bimestral">Bimestral</option>
                                    <option value="Trimestral">Trimestral</option>
                                    <option value="Cuatrimestral">Cuatrimestral</option>
                                    <option value="Semestral">Semestral</option>
                                    <option value="Anual">Anual</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>FECHA PROGRAMADA DE MANTENIMINETO</label>
                                <input name="FECHA PROGRAMADA DE MANTENIMINETO" id="invStartDate" type="date">
                                <div class="text-muted mt-3" style="margin-top:8px;">Usada como fecha inicial para generar programaci√≥n anual (opcional).</div>
                            </div>
                            <div class="form-group">
                                <label>FRECUENCIA DE MANTENIMIENTO</label>
                                <input name="FRECUENCIA DE MANTENIMIENTO" type="text" placeholder="Ej: Cada 3 meses">
                            </div>
                            <div class="form-group">
                                <label>PROGRAMACION DE MANTENIMIENTO ANUAL</label>
                                <textarea name="PROGRAMACION DE MANTENIMIENTO ANUAL" id="invScheduleAnnual" rows="4" placeholder="Ej: 2026-03-01, 2026-06-01, 2026-09-01, 2026-12-01"></textarea>
                                <div class="btn-row" style="margin-top:10px;">
                                    <button type="button" class="btn btn-small btn-secondary" onclick="generateAnnualSchedule()">‚öôÔ∏è Generar programaci√≥n</button>
                                    <button type="button" class="btn btn-small btn-secondary" onclick="clearAnnualSchedule()">üßπ Limpiar</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>MANUAL</label>
                                <input name="MANUAL" type="url" placeholder="Pega un link p√∫blico (Drive/OneDrive) o URL del manual">
                                <div class="text-muted mt-3" style="margin-top:8px;">Si deseas adjuntar en Airtable, pega un enlace p√∫blico (Airtable lo guarda como adjunto por URL).</div>
                            </div>
                        </div>
                    </div>
                </details>

                <details class="section">
                    <summary>5) Responsable / proveedor <span class="summary-hint">contacto, ciudad</span></summary>
                    <div class="section-body">
                        <div class="form-grid">
                            <div class="form-group">
                                <label>RESPONSABLE</label>
                                <input name="RESPONSABLE" type="text" placeholder="Ej: Ing. Biom√©dico / Proveedor">
                            </div>
                            <div class="form-group">
                                <label>NOMBRE</label>
                                <input name="NOMBRE" type="text" placeholder="Ej: Proveedor S.A.S.">
                            </div>
                            <div class="form-group">
                                <label>DIRECCION</label>
                                <input name="DIRECCION" type="text" placeholder="Ej: Calle 1 #2-3">
                            </div>
                            <div class="form-group">
                                <label>TELEFONO</label>
                                <input name="TELEFONO" type="tel" placeholder="Ej: +57 300 000 0000">
                            </div>
                            <div class="form-group">
                                <label>CIUDAD</label>
                                <input name="CIUDAD" type="text" placeholder="Ej: Popay√°n">
                            </div>
                        </div>
                    </div>
                </details>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal('newInventario')">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Guardar en Inventario</button>
                </div>
            </form>
        </div>
    </div>


    <script src="js/app.js"></script>

    <!-- MODAL: NUEVO REGISTRO INVENTARIO -->
    <div id="newInventario" class="modal">
        <div class="modal-content" style="max-width: 980px;">
            <div class="modal-header">
                <h2>Registro de Inventario</h2>
                <span class="close" onclick="closeModal('newInventario')">&times;</span>
            </div>
            <div class="modal-body">
                <form id="inventarioForm">
                    <div class="form-grid">
                        <div class="form-group">
                            <label>Item</label>
                            <input name="Item" required />
                        </div>
                        <div class="form-group">
                            <label>Equipo</label>
                            <input name="Equipo" required />
                        </div>
                        <div class="form-group">
                            <label>Marca</label>
                            <input name="Marca" />
                        </div>
                        <div class="form-group">
                            <label>Modelo</label>
                            <input name="Modelo" />
                        </div>
                        <div class="form-group">
                            <label>Serie</label>
                            <input name="Serie" />
                        </div>
                        <div class="form-group">
                            <label>N√∫mero de Placa</label>
                            <input name="Numero de Placa" />
                        </div>
                        <div class="form-group">
                            <label>Servicio</label>
                            <input name="Servicio" />
                        </div>
                        <div class="form-group">
                            <label>Ubicaci√≥n</label>
                            <input name="Ubicaci√≥n" />
                        </div>
                        <div class="form-group">
                            <label>Vida √∫til (a√±os)</label>
                            <input name="Vida Util" type="number" min="0" step="1" />
                        </div>
                        <div class="form-group">
                            <label>Pr√≥xima fecha programada de mantenimiento</label>
                            <input name="Fecha Programada de Mantenimiento" type="date" />
                        </div>
                        <div class="form-group">
                            <label>Valor en pesos</label>
                            <input name="Valor en Pesos" type="number" min="0" step="1" />
                        </div>
                        <div class="form-group">
                            <label>Calibrable</label>
                            <select name="Calibrable">
                                <option value="">--</option>
                                <option value="true">S√≠</option>
                                <option value="false">No</option>
                            </select>
                        </div>
                    </div>

                    <div style="display:flex; justify-content:flex-end; gap:10px; margin-top: 14px;">
                        <button type="button" class="btn btn-secondary" onclick="closeModal('newInventario')">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Guardar en Inventario</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

</body>
</html>
